!function(t){var e={};function s(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e){t.exports=scene},function(t,e,s){t.exports=s(2)},function(t,e,s){"use strict";s.r(e);var o=s(0);const n={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"editor-table",label:"",name:"",property:{merge:!0,split:!0}},{type:"string",label:"data-key",name:"dataKey",property:"dataKey"},{type:"number",label:"data-index",name:"dataIndex",property:"dataIndex"}]};class h extends(Object(o.RectPath)(o.Component)){get nature(){return n}set merged(t){this.set("merged",!!t),t&&this.set("text","")}get merged(){return this.get("merged")}set rowspan(t){this.set("rowspan",t)}get rowspan(){return this.get("rowspan")}set colspan(t){this.set("colspan",t)}get colspan(){return this.get("colspan")}get border(){this.model.border}_drawBorder(t,e,s,n,h,i){i&&i.strokeStyle&&i.lineWidth&&i.lineDash&&(t.beginPath(),t.moveTo(e,s),t.lineTo(n,h),o.Component.drawStroke(t,i))}_draw(t){var{left:e,top:s,width:o,height:n}=this.model,h=this.model.border||{};t.beginPath(),t.lineWidth=0,t.rect(e,s,o,n),this.drawFill(t);var i=this.parent,r=i.components.indexOf(this),l=i.columns||1,c=i.rows||1;this._drawBorder(t,e,s,e+o,s,h.top),this._drawBorder(t,e,s+n,e,s,h.left),function(t,e,s){return(t+1)%s==0}(r,0,l)&&this._drawBorder(t,e+o,s,e+o,s+n,h.right),function(t,e,s){return t>=(e-1)*s}(r,c,l)&&this._drawBorder(t,e+o,s+n,e,s+n,h.bottom)}}["border"].forEach(t=>o.Component.memoize(h.prototype,t,!1)),o.Component.register("table-cell",h);const i={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"rows",name:"rows",property:"rows"},{type:"number",label:"columns",name:"columns",property:"columns"}]},r={all:["top","left","bottom","right"],out:["top","left","bottom","right"],left:["left"],right:["right"],top:["top"],bottom:["bottom"],leftright:["left","right"],topbottom:["top","bottom"]},l={strokeStyle:"",lineDash:"solid",lineWidth:0},c={strokeStyle:"#999",lineDash:"solid",lineWidth:1},m=o.Layout.get("table");function u(t,...e){for(let s in e)if(t.hasOwnProperty(e[s]))return!0}function p(t){return o.Model.compile({type:"table-cell",strokeStyle:"blue",left:0,top:0,width:1,height:1,textWrap:!0,border:f(c,"all")},t)}function a(t,e){var s=JSON.parse(JSON.stringify(t));return delete s.text,o.Model.compile(s,e)}function f(t,e){return(r[e]||[]).reduce((e,s)=>(e[s]=t,e),{})}function g(t,e,s){t&&t.set("border",Object.assign({},t.get("border")||{},f(e,s)))}function d(t,e,s,o){return 0==o||!(o%e)||-1==s.indexOf(o-1)}function w(t,e,s,o){return o==t-1||o%e==e-1||-1==s.indexOf(o+1)}function C(t,e,s,o){return o<e||-1==s.indexOf(o-e)}function b(t,e,s,o){return o>t-e-1||-1==s.indexOf(o+e)}function x(t,e){return e-t}function v(t,e){return e+t}function y(t,e){return e%t?e-1:-1}function R(t,e){return(e+1)%t?e+1:-1}function E(t,e){var s=[];for(let t=0;t<e;t++)s.push(1);return s}var O={ondragmove:function(t,e,s){var{left:o,top:n,width:h,height:i}=s.textBounds,r=s.widths_sum,l=s.widths.slice(),c=o+l.slice(0,e+1).reduce((t,e)=>t+e,0)/r*h,m=(s.transcoordP2S(t.x,t.y).x-c)/h*r,u=r/h*10;m=m<0?-Math.min(l[e]-u,-m):Math.min(l[e+1]-u,m),l[e]=Math.round(100*(l[e]+m))/100,l[e+1]=Math.round(100*(l[e+1]-m))/100,s.set("widths",l)}},M={ondragmove:function(t,e,s){var{left:o,top:n,width:h,height:i}=s.textBounds,r=s.heights_sum,l=s.heights.slice();e-=s.columns-1;var c=n+l.slice(0,e+1).reduce((t,e)=>t+e,0)/r*i,m=(s.transcoordP2S(t.x,t.y).y-c)/i*r,u=r/i*10;m=m<0?-Math.min(l[e]-u,-m):Math.min(l[e+1]-u,m),l[e]=Math.round(100*(l[e]+m))/100,l[e+1]=Math.round(100*(l[e+1]-m))/100,s.set("heights",l)}};class _ extends o.Container{created(){var t=this.rows*this.columns,e=this.size()-t;if(0!=e){if(e>0){let t=this._components.slice(e);this.remove(t)}else{let t=[];for(let s=0;s<-e;s++)t.push(p(this.app));this.add(t)}var s=this.get("widths"),o=this.get("heights");(!s||s.length<this.columns)&&this.set("widths",this.widths),(!o||o.length<this.rows)&&this.set("heights",this.heights)}}get focusible(){return!1}get widths(){var t=this.get("widths");return t?t.length<this.columns?t.concat(E(0,this.columns-t.length)):t.length>this.columns?t.slice(0,this.columns):t:E(0,this.columns)}get heights(){var t=this.get("heights");return t?t.length<this.rows?t.concat(E(0,this.rows-t.length)):t.length>this.rows?t.slice(0,this.rows):t:E(0,this.rows)}buildCells(t,e,s,o){if(t<s){let e=this._components.slice(o*t),n=[];if(e.forEach(t=>{(!0===t.merged||t.rowspan>1||t.colspan>1)&&n.push(t)}),n.length>0){let e=[],h=[];n.forEach(t=>{let s,n,i;for(s=this.components.indexOf(t)%o,i=(n=Math.floor(this.components.indexOf(t)/o))*o+s+1;i;){--i;let t=this.components[i];if(t.rowspan>1||t.colspan>1){let r=this.components.indexOf(t)%o,l=this.components.indexOf(t)%o+t.colspan,c=Math.floor(this.components.indexOf(t)/o),m=Math.floor(this.components.indexOf(t)/o)+t.rowspan;s>=r&&s<l&&n>=c&&n<m&&-1==h.indexOf(i)&&(h.push(i),e.push(t))}}}),e.forEach(e=>{e.rowspan-=s-t})}this.remove(e)}var n=Math.min(t,s);if(e>o)for(let t=0;t<n;t++)for(let s=o;s<e;s++)this.insertComponentAt(p(this.app),t*e+s);else if(e<o){let t=[];for(let s=0;s<n;s++)for(let n=e;n<o;n++)t.push(this.components[s*o+n]);let s=[];if(t.forEach(t=>{(!0===t.merged||t.rowspan>1||t.colspan>1)&&s.push(t)}),s.length>0){let t=[],n=[];s.forEach(e=>{let s,h,i;for(s=this.components.indexOf(e)%o,i=(h=Math.floor(this.components.indexOf(e)/o))*o+s+1;i;){--i;let e=this.components[i];if(e.rowspan>1||e.colspan>1){let r=this.components.indexOf(e)%o,l=this.components.indexOf(e)%o+e.colspan,c=Math.floor(this.components.indexOf(e)/o),m=Math.floor(this.components.indexOf(e)/o)+e.rowspan;s>=r&&s<l&&h>=c&&h<m&&-1==n.indexOf(i)&&(n.push(i),t.push(e))}}}),t.forEach(t=>{t.colspan-=o-e})}this.remove(t)}if(t>s){let o=[];for(let n=s;n<t;n++)for(let t=0;t<e;t++)o.push(p(this.app));this.add(o)}this.set({widths:this.widths,heights:this.heights})}get layout(){return m}get rows(){return this.get("rows")}setCellsStyle(t,e,s){var o=this.components,n=o.length,h=this.get("columns"),i=[];t.forEach(t=>{if(i.push(t),t.colspan||t.rowspan){let e=this.getRowColumn(t).column,s=this.getRowColumn(t).row;for(let o=s;o<s+t.rowspan;o++)for(let n=e;n<e+t.colspan;n++)o==s&&n==e||i.push(this.components[o*this.columns+n])}});var r=i.map(t=>o.indexOf(t));r.forEach(t=>{var i=o[t];switch(s){case"all":g(i,e,s),d(0,h,r,t)&&g(o[y(h,t)],e,"right"),w(n,h,r,t)&&g(o[R(h,t)],e,"left"),C(0,h,r,t)&&g(o[x(h,t)],e,"bottom"),b(n,h,r,t)&&g(o[v(h,t)],e,"top");break;case"in":d(0,h,r,t)||g(i,e,"left"),w(n,h,r,t)||g(i,e,"right"),C(0,h,r,t)||g(i,e,"top"),b(n,h,r,t)||g(i,e,"bottom");break;case"out":d(0,h,r,t)&&(g(i,e,"left"),g(o[y(h,t)],e,"right")),w(n,h,r,t)&&(g(i,e,"right"),g(o[R(h,t)],e,"left")),C(0,h,r,t)&&(g(i,e,"top"),g(o[x(h,t)],e,"bottom")),b(n,h,r,t)&&(g(i,e,"bottom"),g(o[v(h,t)],e,"top"));break;case"left":d(0,h,r,t)&&(g(i,e,"left"),g(o[y(h,t)],e,"right"));break;case"right":w(n,h,r,t)&&(g(i,e,"right"),g(o[R(h,t)],e,"left"));break;case"center":d(0,h,r,t)||g(i,e,"left"),w(n,h,r,t)||g(i,e,"right");break;case"middle":C(0,h,r,t)||g(i,e,"top"),b(n,h,r,t)||g(i,e,"bottom");break;case"top":C(0,h,r,t)&&(g(i,e,"top"),g(o[x(h,t)],e,"bottom"));break;case"bottom":b(n,h,r,t)&&(g(i,e,"bottom"),g(o[v(h,t)],e,"top"));break;case"clear":g(i,l,"all"),d(0,h,r,t)&&g(o[y(h,t)],l,"right"),w(n,h,r,t)&&g(o[R(h,t)],l,"left"),C(0,h,r,t)&&g(o[x(h,t)],l,"bottom"),b(n,h,r,t)&&g(o[v(h,t)],l,"top")}})}setCellsData(){var t=this.data;if(t){t=this.toObjectArrayValue(t)||[];var e=this.components;this.get("columns");e.forEach(e=>{var s=e.model.dataKey,o=e.model.dataIndex;s&&o>=0&&(e.value=(t[o]||{})[s])})}}getRowColumn(t){var e=this.components.indexOf(t);this.components.length;return{column:e%this.columns,row:Math.floor(e/this.columns)}}getCellsByRow(t){return this.components.slice(t*this.columns,(t+1)*this.columns)}getCellsByColumn(t){for(var e=[],s=0;s<this.rows;s++)e.push(this.components[this.columns*s+t]);return e}findMergedCellByX(t){let e,s=[];for(let o=0;o<this.columns;o++)(!0===(e=this.components[t*this.columns+o]).merged||e.rowspan>1||e.colspan>1)&&s.push(e);return s}findMergedCellByY(t){let e,s=[];for(let o=0;o<this.rows;o++)(!0===(e=this.components[o*this.columns+t]).merged||e.rowspan>1||e.colspan>1)&&s.push(e);return s}mergeCells(t){let e=[];if(t.forEach(t=>{let s=this.getRowColumn(t).row;-1==e.indexOf(s)&&e.push(s)}),e.length-1!=e[e.length-1]-e[0])return!1;let s=[];if(t.forEach(t=>{let e=this.getRowColumn(t).column;-1==s.indexOf(e)&&s.push(e)}),s.length-1!=s[s.length-1]-s[0])return!1;let o=e.length,n=s.length,h=t.length;if(h!==o*n||h<2)return!1;t.sort((t,e)=>this.getRowColumn(t).row*this.columns+this.getRowColumn(t).column-(this.getRowColumn(e).row*this.columns+this.getRowColumn(e).column));let i=t[0];i.set({colspan:n,rowspan:o});for(let e=1;e<h;e++)t[e].merged=!0;this.root.selected=[i]}splitCells(t){this.getRowColumn(t[0]);let e=t[0],s=this.components.indexOf(t[0]),o=this.components.length,n=this.components[o-1],h=o/(this.getRowColumn(n).row+1);for(let t=0;t<e.rowspan;t++){let o,n;for(let i=s;i<s+e.colspan;i++)o=h*t+i,(n=this.components[o]).merged=!1}e.colspan=1,e.rowspan=1}deleteRows(t){if(1==t[0].merged)return!1;let e=[];t.forEach(t=>{let s=this.getRowColumn(t).row;-1==e.indexOf(s)&&e.push(s)}),e.sort((t,e)=>t-e),e.reverse();var s=this.heights.slice();e.forEach(t=>{let e=this.findMergedCellByX(t);if(0===e.length)this.remove(this.getCellsByRow(t));else{let s=[],o=[];e.forEach(t=>{let e,n,h;for(e=this.getRowColumn(t).column,h=(n=this.getRowColumn(t).row)*this.columns+e+1;h;){--h;let t=this.components[h];if(t.rowspan>1||t.colspan>1){let i=this.getRowColumn(t).column,r=this.getRowColumn(t).column+t.colspan,l=this.getRowColumn(t).row,c=this.getRowColumn(t).row+t.rowspan;e>=i&&e<r&&n>=l&&n<c&&-1==o.indexOf(h)&&(o.push(h),s.push(t))}}}),o.forEach(e=>{let s=Math.floor(e/this.columns);t===s&&s!==this.rows-1&&this.components[e].rowspan>1?(this.components[e+this.columns].rowspan=this.components[e].rowspan-1,this.components[e+this.columns].colspan=this.components[e].colspan,this.components[e+this.columns].merged=!1,this.components[e+this.columns].set("text",this.components[e].get("text"))):this.components[e].rowspan-=1}),this.remove(this.getCellsByRow(t))}}),s.splice(e,1),this.model.rows-=e.length,this.set("heights",s)}deleteColumns(t){if(1==t[0].merged)return!1;let e=[];t.forEach(t=>{let s=this.getRowColumn(t).column;-1==e.indexOf(s)&&e.push(s)}),e.sort((t,e)=>t-e),e.reverse(),e.forEach(t=>{var e=this.widths.slice();let s=this.findMergedCellByY(t);if(0===s.length)this.remove(this.getCellsByColumn(t));else{let e=[],o=[];s.forEach(t=>{let s,n,h;for(s=this.getRowColumn(t).column,h=(n=this.getRowColumn(t).row)*this.columns+s+1;h;){--h;let t=this.components[h];if(t.rowspan>1||t.colspan>1){let i=this.getRowColumn(t).column,r=this.getRowColumn(t).column+t.colspan,l=this.getRowColumn(t).row,c=this.getRowColumn(t).row+t.rowspan;s>=i&&s<r&&n>=l&&n<c&&-1==o.indexOf(h)&&(o.push(h),e.push(t))}}}),o.forEach(e=>{let s=e%this.columns;t===s&&s!==this.columns-1&&this.components[e].colspan>1?(this.components[e+1].rowspan=this.components[e].rowspan,this.components[e+1].colspan=this.components[e].colspan-1,this.components[e+1].merged=!1,this.components[e+1].set("text",this.components[e].get("text"))):this.components[e].colspan-=1}),this.remove(this.getCellsByColumn(t))}e.splice(t,1),this.model.columns-=1,this.set("widths",e)})}insertCellsAbove(t){let e=[];if(t.forEach(t=>{let s=this.getRowColumn(t).row;-1==e.indexOf(s)&&e.push(s)}),e.sort((t,e)=>t-e),e.reverse(),e.length>=2)return!1;let s=e[0],o=[],n=[];e.forEach(t=>{let h=this.findMergedCellByX(t);if(0===h.length){for(let e=0;e<this.columns;e++)n.push(a(this.components[t*this.columns+e].model,this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)});let h=this.heights.slice();h.splice(s,0,...o),this.set("heights",h),this.model.rows+=e.length,this.clearCache()}else{if(e.length>1)return!1;let i=[],r=[];h.forEach(t=>{let e,s,o;for(e=this.getRowColumn(t).column,o=(s=this.getRowColumn(t).row)*this.columns+e+1;o;){--o;let t=this.components[o];if(t.rowspan>1||t.colspan>1){let n=this.getRowColumn(t).column,h=this.getRowColumn(t).column+t.colspan,l=this.getRowColumn(t).row,c=this.getRowColumn(t).row+t.rowspan;e>=n&&e<h&&s>=l&&s<c&&-1==r.indexOf(o)&&(r.push(o),i.push(t))}}}),r.forEach(h=>{if(r.length>=2)return!1;let i=Math.floor(h/this.columns),l={rowspan:this.components[h].rowspan,colspan:this.components[h].colspan,text:this.components[h].get("text"),merged:this.components[h].merged};if(i===t){for(let t=0;t<this.columns;t++)n.push(p(this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)}),this.components[h+this.columns].rowspan=l.rowspan,this.components[h+this.columns].colspan=l.colspan,this.components[h+this.columns].set("text",l.text),this.components[h+this.columns].merged=l.merged}else{for(let e=0;e<this.columns;e++)n.push(a(this.components[t*this.columns+e].model,this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)}),this.components[h].rowspan+=1}let c=this.heights.slice();c.splice(s,0,...o),this.set("heights",c),this.model.rows+=e.length,this.clearCache()})}})}insertCellsBelow(t){let e=[];if(t.forEach(t=>{let s=this.getRowColumn(t).row;-1==e.indexOf(s)&&e.push(s)}),e.sort((t,e)=>t-e),e.reverse(),e.length>=2)return!1;let s=e[e.length-1]+1,o=[],n=[];e.forEach(t=>{let e=this.findMergedCellByX(t);if(0===e.length){for(let e=0;e<this.columns;e++)n.push(a(this.components[t*this.columns+e].model,this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)});let e=this.heights.slice();e.splice(s,0,...o),this.set("heights",e),this.model.rows+=1,this.clearCache()}else{let h=[],i=[];e.forEach(t=>{let e,s,o;for(e=this.getRowColumn(t).column,o=(s=this.getRowColumn(t).row)*this.columns+e+1;o;){--o;let t=this.components[o];if(t.rowspan>1||t.colspan>1){let n=this.getRowColumn(t).column,r=this.getRowColumn(t).column+t.colspan,l=this.getRowColumn(t).row,c=this.getRowColumn(t).row+t.rowspan;e>=n&&e<r&&s>=l&&s<c&&-1==i.indexOf(o)&&(i.push(o),h.push(t))}}}),i.forEach(e=>{if(i.length>=2)return!1;let h=Math.floor(e/this.columns),r=this.components[e].rowspan;this.components[e].colspan,this.components[e].get("text"),this.components[e].merged;if(h+r-1===t){for(let t=0;t<this.columns;t++)n.push(p(this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)})}else if(h===t){for(let e=0;e<this.columns;e++)n.push(a(this.components[t*this.columns+e].model,this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)}),this.components[e].rowspan+=1,this.components[e+this.columns].rowspan=1,this.components[e+this.columns].colspan=1,this.components[e+this.columns].merged=!0,this.components[e+this.columns].set("text","")}else{for(let e=0;e<this.columns;e++)n.push(a(this.components[t*this.columns+e].model,this.app));o.push(this.heights[t]),n.reverse().forEach(t=>{this.insertComponentAt(t,s*this.columns)}),this.components[e].rowspan+=1}let l=this.heights.slice();l.splice(s,0,...o),this.set("heights",l),this.model.rows+=1,this.clearCache()})}})}insertCellsLeft(t){let e=[];if(t.forEach(t=>{let s=this.getRowColumn(t).column;-1==e.indexOf(s)&&e.push(s)}),e.sort((t,e)=>t-e),e.reverse(),e.length>=2)return!1;let s=e[0],o=[],n=[];e.forEach(t=>{let h=this.findMergedCellByY(t);if(0===h.length){for(let e=0;e<this.rows;e++)n.push(a(this.components[t+this.columns*e].model,this.app));o.push(this.widths[t]);let h=this.columns,i=this.rows;n.reverse().forEach(t=>{0==i&&(i=this.rows,h++),i--,this.insertComponentAt(t,s+i*h)});let r=this.widths.slice();this.model.columns+=e.length,r.splice(s,0,...o),this.set("widths",r)}else{let i=[],r=[];h.forEach(t=>{let e,s,o;for(e=this.getRowColumn(t).column,o=(s=this.getRowColumn(t).row)*this.columns+e+1;o;){--o;let t=this.components[o];if(t.rowspan>1||t.colspan>1){let n=this.getRowColumn(t).column,h=this.getRowColumn(t).column+t.colspan,l=this.getRowColumn(t).row,c=this.getRowColumn(t).row+t.rowspan;e>=n&&e<h&&s>=l&&s<c&&-1==r.indexOf(o)&&(r.push(o),i.push(t))}}}),r.forEach(h=>{if(r.length>=2)return!1;let i=h%this.columns;this.components[h].rowspan,this.components[h].colspan,this.components[h].get("text"),this.components[h].merged;if(i===t){for(let t=0;t<this.rows;t++)n.push(p(this.app));o.push(this.widths[t]);let e=this.columns,h=this.rows;n.reverse().forEach(t=>{0==h&&(h=this.rows,e++),h--,this.insertComponentAt(t,s+h*e)})}else{this.components[h].colspan+=1;for(let e=0;e<this.rows;e++)n.push(a(this.components[t+this.columns*e].model,this.app));o.push(this.widths[t]);let e=this.columns,i=this.rows;n.reverse().forEach(t=>{0==i&&(i=this.rows,e++),i--,this.insertComponentAt(t,s+i*e)})}let l=this.widths.slice();this.model.columns+=e.length,l.splice(s,0,...o),this.set("widths",l)})}})}insertCellsRight(t){let e=[];if(t.forEach(t=>{let s=this.getRowColumn(t).column;-1==e.indexOf(s)&&e.push(s)}),e.sort((t,e)=>t-e),e.reverse(),e.length>=2)return!1;let s=e[e.length-1]+1,o=[],n=[];e.forEach(t=>{let h=this.findMergedCellByY(t);if(0===h.length){for(let e=0;e<this.rows;e++)n.push(a(this.components[t+this.columns*e].model,this.app));o.push(this.widths[t]);let h=this.columns,i=this.rows;n.reverse().forEach(t=>{0==i&&(i=this.rows,h++),i--,this.insertComponentAt(t,s+i*h)});let r=this.widths.slice();this.model.columns+=e.length,r.splice(s,0,...o),this.set("widths",r)}else{let i=[],r=[];h.forEach(t=>{let e,s,o;for(e=this.getRowColumn(t).column,o=(s=this.getRowColumn(t).row)*this.columns+e+1;o;){--o;let t=this.components[o];if(t.rowspan>1||t.colspan>1){let n=this.getRowColumn(t).column,h=this.getRowColumn(t).column+t.colspan,l=this.getRowColumn(t).row,c=this.getRowColumn(t).row+t.rowspan;e>=n&&e<h&&s>=l&&s<c&&-1==r.indexOf(o)&&(r.push(o),i.push(t))}}}),r.forEach(h=>{if(r.length>=2)return!1;let i=Math.floor(h/this.columns),l=h%this.columns,c=(this.components[h].rowspan,this.components[h].colspan);this.components[h].get("text"),this.components[h].merged;if(l+c-1===t){for(let t=0;t<this.rows;t++)n.push(p(this.app));o.push(this.widths[t]);let e=this.columns,h=this.rows;n.reverse().forEach(t=>{0==h&&(h=this.rows,e++),h--,this.insertComponentAt(t,s+h*e)})}else if(l===t){this.components[h].colspan+=1;for(let e=0;e<this.rows;e++)n.push(a(this.components[t+this.columns*e].model,this.app));o.push(this.widths[t]);let e=this.columns,r=this.rows;n.reverse().forEach(t=>{0==r&&(r=this.rows,e++),r--,this.insertComponentAt(t,s+r*e)}),this.components[h+i+1].rowspan=1,this.components[h+i+1].colspan=1,this.components[h+i+1].merged=!0,this.components[h+i+1].set("text","")}else{this.components[h].colspan+=1;for(let e=0;e<this.rows;e++)n.push(a(this.components[t+this.columns*e].model,this.app));o.push(this.widths[t]);let e=this.columns,i=this.rows;n.reverse().forEach(t=>{0==i&&(i=this.rows,e++),i--,this.insertComponentAt(t,s+i*e)})}let m=this.widths.slice();this.model.columns+=e.length,m.splice(s,0,...o),this.set("widths",m)})}})}distributeHorizontal(t){var e=[];t.forEach(t=>{let s=this.getRowColumn(t);-1==e.indexOf(s.column)&&e.push(s.column)});var s=e.reduce((t,e)=>t+this.widths[e],0),o=Math.round(s/e.length*100)/100,n=this.widths.slice();e.forEach(t=>{n[t]=o}),this.set("widths",n)}distributeVertical(t){var e=[];t.forEach(t=>{let s=this.getRowColumn(t);-1==e.indexOf(s.row)&&e.push(s.row)});var s=e.reduce((t,e)=>t+this.heights[e],0),o=Math.round(s/e.length*100)/100,n=this.heights.slice();e.forEach(t=>{n[t]=o}),this.set("heights",n)}toObjectArrayValue(t){if(!t||0===t.length)return null;if(!t[0].hasOwnProperty("__field1"))return t;let e={},s=[];for(let s in t[0])e[s]=t[0][s];for(var o=1;o<t.length;o++){let n={},h=t[o];for(let t in e){let s=e[t],o=h[t];n[s]=o}s.push(n)}return s}get columns(){return this.get("columns")}get lefts(){return this.components.filter((t,e)=>!(e%this.columns))}get centers(){return this.components.filter((t,e)=>e%this.columns&&(e+1)%this.columns)}get rights(){return this.components.filter((t,e)=>!((e+1)%this.columns))}get tops(){return this.components.slice(0,this.columns)}get middles(){return this.components.slice(this.columns,this.columns*(this.rows-1))}get bottoms(){return this.components.slice(this.columns*(this.rows-1))}get all(){return this.components}get widths_sum(){var t=this.widths;return t?t.filter((t,e)=>e<this.columns).reduce((t,e)=>t+e,0):this.columns}get heights_sum(){var t=this.heights;return t?t.filter((t,e)=>e<this.rows).reduce((t,e)=>t+e,0):this.rows}get nature(){return i}get controls(){var t=this.widths,e=this.heights,s=this.textBounds,o=s.width/this.widths_sum,n=s.height/this.heights_sum,h=s.left,i=s.top,r=[];return t.slice(0,this.columns-1).forEach(t=>{h+=t*o,r.push({x:h,y:s.top,handler:O})}),e.slice(0,this.rows-1).forEach(t=>{i+=t*n,r.push({x:s.left,y:i,handler:M})}),r}onchange(t,e){u(t,"rows","columns")&&this.buildCells(this.get("rows"),this.get("columns"),e.hasOwnProperty("rows")?e.rows:this.get("rows"),e.hasOwnProperty("columns")?e.columns:this.get("columns")),(e.data||t.data)&&this.setCellsData()}get eventMap(){return{"(self)":{"(descendant)":{change:this.oncellchanged}}}}oncellchanged(t,e){u(t,"dataKey","dataIndex")&&this.setCellsData()}}["rows","columns","widths","heights","widths_sum","heights_sum","controls"].forEach(t=>o.Component.memoize(_.prototype,t,!1)),o.Component.register("table",_),s.d(e,"Table",function(){return _})}]);
//# sourceMappingURL=things-scene-table.js.map